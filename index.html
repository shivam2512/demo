<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Practice Notes + Assignments</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    pre { white-space: pre-wrap; word-wrap: break-word; font-family: monospace; }
    .calendar { display: grid; grid-template-columns: repeat(7,1fr); gap:6px; margin-top:10px; }
    .weekday { font-weight:600; text-align:center; background:#f8f9fa; padding:6px 0; border-radius:6px; }
    .calendar-day { border:1px solid #dee2e6; padding:12px; text-align:center; cursor:pointer; min-height:70px; display:flex; align-items:center; justify-content:center; border-radius:10px; }
    .calendar-day.has-notes { background:#d1e7dd; }
    .calendar-day.today { background:#fff3cd; }
    .assignment-box { border:1px solid #dee2e6; padding:20px; border-radius:10px; background:#ffffff; }
  </style>
</head>
<body>
<nav class="navbar navbar-dark bg-dark navbar-expand-lg">
  <div class="container">
    <a class="navbar-brand" href="#">Practice Notes</a>
    <button class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navMenu">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navMenu">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item"><a class="nav-link active" href="#notesSection">Notes</a></li>
        <li class="nav-item"><a class="nav-link" href="#assignSection">Assignments</a></li>
      </ul>
    </div>
  </div>
</nav>

<div id="latestNotification" class="alert alert-info text-center mb-0">Latest notes: Loading‚Ä¶</div>

<!-- NOTES SECTION -->
<section id="notesSection" class="container py-4">
  <div class="mb-3 d-flex gap-2 flex-wrap">
    <button class="btn btn-success" onclick="downloadSQLFile('Afternoon','Afternoon.sql')">Download Afternoon Notes</button>
    <button class="btn btn-primary" onclick="downloadSQLFile('Evening','Evening.sql')">Download Evening Notes</button>
  </div>

  <div class="d-flex justify-content-between align-items-center mb-2">
    <button class="btn btn-outline-secondary" onclick="prevMonth()">‚Üê Previous</button>
    <h4 id="monthLabel" class="fw-bold mb-0"></h4>
    <button class="btn btn-outline-secondary" onclick="nextMonth()">Next ‚Üí</button>
  </div>

  <div id="calendarContainer" class="mb-4"></div>
  <div id="notesContainer"></div>
  <div id="emptyState" class="text-center text-muted py-5 d-none"><h5>No notes yet</h5></div>
  <div class="text-center mt-3"><button class="btn btn-outline-secondary d-none" id="clearViewBtn" onclick="clearNotesView()">Clear View</button></div>
</section>

<!-- ASSIGNMENT SECTION -->
<section id="assignSection" class="container py-4">
  <h2 class="mb-3">üìù SQL Assignments</h2>
  <div class="assignment-box">
    <h5><strong>Question:</strong></h5>
    <div id="questionBox">Write an SQL query to select all customers whose age is greater than 25.</div>
    <textarea id="sqlInput" class="form-control mt-3" placeholder="Write your SQL here..."></textarea>
    <button class="btn btn-primary mt-3" onclick="submitAssignment()">Submit</button>

    <div id="assignmentResult" class="mt-4"></div>

    <h4 class="mt-4">Overall Performance:</h4>
    <div id="performanceBox" class="border p-3 rounded"></div>
  </div>
</section>

<script>
// ---- Notes System (unchanged) ----
let allNotes=[]; let currentMonthIndex,currentYear;
const monthMap={JAN:"01",FEB:"02",MAR:"03",APR:"04",MAY:"05",JUN:"06",JUL:"07",AUG:"08",SEP:"09",OCT:"10",NOV:"11",DEC:"12"};
const monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"];
function parseNoteDate(str){const[d,m,y]=str.split("-");return{day:d,monthNum:Number(monthMap[m]),year:y};}
function toJSDate(str){const{day,monthNum,year}=parseNoteDate(str);return new Date(Number(year),monthNum-1,Number(day));}
async function loadNotes(){const res=await fetch("notes.json");allNotes=await res.json();const t=new Date();currentMonthIndex=t.getMonth();currentYear=t.getFullYear();renderCalendar();updateLatestNotification();}
function renderCalendar(){const c=document.getElementById("calendarContainer");c.innerHTML="";document.getElementById("monthLabel").textContent=`${monthNames[currentMonthIndex]} ${currentYear}`;const daysInMonth=new Date(currentYear,currentMonthIndex+1,0).getDate();let firstDay=new Date(currentYear,currentMonthIndex,1).getDay();firstDay=firstDay===0?7:firstDay;
const card=document.createElement("div");card.className="card shadow";const body=document.createElement("div");body.className="card-body";
const weekdays=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];const wd=document.createElement("div");wd.className="calendar";weekdays.forEach(w=>{const d=document.createElement("div");d.className="weekday";d.textContent=w;wd.appendChild(d);});body.appendChild(wd);
const grid=document.createElement("div");grid.className="calendar";
for(let i=1;i<firstDay;i++){const e=document.createElement("div");e.className="calendar-day";grid.appendChild(e);} const today=new Date();
for(let d=1;d<=daysInMonth;d++){const ds=String(d).padStart(2,"0");const has=allNotes.some(n=>{const{day,monthNum,year}=parseNoteDate(n.date);return day===ds&&monthNum===currentMonthIndex+1&&Number(year)===currentYear;});
const cell=document.createElement("div");cell.className="calendar-day"+(has?" has-notes":"");cell.textContent=d;
if(today.getDate()===d&&today.getMonth()===currentMonthIndex&&today.getFullYear()===currentYear){cell.classList.add("today");}
cell.onclick=()=>{const filtered=allNotes.filter(n=>{const{day,monthNum,year}=parseNoteDate(n.date);return day===ds&&monthNum===currentMonthIndex+1&&Number(year)===currentYear;});renderNotes(filtered);};
grid.appendChild(cell);} body.appendChild(grid);card.appendChild(body);c.appendChild(card);} 
function prevMonth(){currentMonthIndex--;if(currentMonthIndex<0){currentMonthIndex=11;currentYear--;}renderCalendar();}
function nextMonth(){currentMonthIndex++;if(currentMonthIndex>11){currentMonthIndex=0;currentYear++;}renderCalendar();}
function renderNotes(notes){const c=document.getElementById("notesContainer");const e=document.getElementById("emptyState");const b=document.getElementById("clearViewBtn");c.innerHTML="";if(!notes.length){e.classList.remove("d-none");b.classList.add("d-none");return;}e.classList.add("d-none");notes.forEach(n=>{const card=document.createElement("div");card.className="card mb-3";card.innerHTML=`<div class='card-header bg-success text-white'><strong>${n.date}</strong> ‚Äì ${n.session} ‚Äì ${n.title}</div><div class='card-body'><pre>${n.body}</pre></div>`;c.appendChild(card);});b.classList.remove("d-none");}
function clearNotesView(){document.getElementById("notesContainer").innerHTML="";document.getElementById("emptyState").classList.add("d-none");document.getElementById("clearViewBtn").classList.add("d-none");}
function downloadSQLFile(session,filename){const s=allNotes.filter(n=>n.session===session);const t=s.map(n=>`-- ${n.date} : ${n.title}\n${n.body}\n\n`).join("");const blob=new Blob([t],{type:"text/sql"});const url=URL.createObjectURL(blob);const a=document.createElement("a");a.href=url;a.download=filename;a.click();URL.revokeObjectURL(url);} 
function updateLatestNotification(){if(!allNotes.length){document.getElementById("latestNotification").textContent="No notes yet.";return;}const sorted=[...allNotes].sort((a,b)=>toJSDate(b.date)-toJSDate(a.date));const latest=sorted[0];document.getElementById("latestNotification").textContent=`Latest notes: ${latest.date} (${latest.session})`;}
loadNotes();

// ---- Assignment System ----
let expectedAnswer=/select \* from customers where age > 25/i;let total=0,correct=0;
function submitAssignment(){const sql=document.getElementById("sqlInput").value.trim();if(!sql)return alert("Write your SQL!");total++;let ok=expectedAnswer.test(sql);if(ok)correct++;
const res=document.getElementById("assignmentResult");res.innerHTML=`<div class='${ok?'text-success':'text-danger'} fw-bold'>${ok?'‚úî Correct':'‚úò Wrong'}</div><h6>Your Answer:</h6><pre>${sql}</pre>${!ok?`<h6>Correct Answer:</h6><pre>SELECT * FROM customers WHERE age > 25;</pre>`:''}`;
updatePerformance();}
function updatePerformance(){const p=total?((correct/total)*100).toFixed(2):0;document.getElementById("performanceBox").innerHTML=`Total Attempts: ${total}<br>Correct: ${correct}<br>Score: ${p}%`;}
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>